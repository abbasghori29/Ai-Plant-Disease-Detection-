{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>LeafCheck-Disease</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Free HTML Templates" name="keywords" />
    <meta content="Free HTML Templates" name="description" />

    <!-- Favicon -->
    <link href="{% static 'img/favicon.ico' %}" rel="icon" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icon Font Stylesheet -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <link
      href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}"
      rel="stylesheet"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    
  </head>
<style>
    input[type=file]::file-selector-button {
        margin-right: 20px;
        border: none;
        background: #084cdf;
        background-color: green;
        padding: 10px 20px;
        border-radius: 10px;
        color: #fff;
        cursor: pointer;
        transition: background .2s ease-in-out;
      }
      
      input[type=file]::file-selector-button:hover {
        background: #0d45a5;
      }
      
      .drop-container {
        display: flex;
        gap: 10px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 200px;
        padding: 20px;
        background-color:white;
        border-radius: 10px;
        border: 2px dashed #555;
        color: #444;
        cursor: pointer;
        transition: background .2s ease-in-out, border .2s ease-in-out;
      }
      .drop-container.drag-active {
        background: #eee;
        border-color: #111;
      }
      
      .drop-container.drag-active .drop-title {
        color: #222;
      }
      
      .drop-container:hover {
        background: #FFA400;
        border-color: #111;
      }
      
      .drop-container:hover .drop-title {
        color: #222;
      }
      
      .drop-title {
        color: #444;
        font-size: 20px;
        font-weight: bold;
        text-align: center;
        transition: color .2s ease-in-out;
      }
</style>
  <body>
    <!-- Topbar Start -->
    <div class="container-fluid px-5 d-none d-lg-block">
      <div class="row gx-5 py-3 align-items-center">
        <div class="col-lg-3">
          <div class="d-flex align-items-center justify-content-start">
            <i class="bi bi-phone-vibrate fs-1 text-primary me-2"></i>
            <h2 class="mb-0">03032008961</h2>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="d-flex align-items-center justify-content-center">
            <a href="i{% url 'home' %}" class="navbar-brand ms-lg-5">
              <h1 class="m-0 display-4 text-primary">
                <span class="text-secondary">Leaf</span>Check
              </h1>
            </a>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="d-flex align-items-center justify-content-end">
            <a class="btn btn-primary btn-square rounded-circle me-2" href="#">
              <i class="fab fa-twitter"></i>
            </a>
            <a class="btn btn-primary btn-square rounded-circle me-2" href="#">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a class="btn btn-primary btn-square rounded-circle me-2" href="#">
              <i class="fab fa-linkedin-in"></i>
            </a>
            <a class="btn btn-primary btn-square rounded-circle" href="#">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    {% include 'navbar.html' %}
    <!-- Navbar End -->

    <!-- Hero Start -->
    <div class="container-fluid bg-primary py-5 bg-hero mb-5">
      <div class="container py-5">
        <div class="row justify-content-start">
          <div class="col-lg-8 text-center text-lg-start">
            <h1 class="display-1 text-white mb-md-4">Best Ai Model To Predict Your Plant's Disease!</h1>
            <a href="#find" class="btn btn-primary py-md-3 px-md-5 me-3">Find Disease Of Your Plant</a>
            <a href="{% url 'contact' %}" class="btn btn-secondary py-md-3 px-md-5">Contact Us</a>
          </div>
        </div>
      </div>
    </div>
    <!-- Hero End -->

    <!-- Disease Section Start -->
    <div class="container-fluid py-5" id="find">
      <div class="container">
        <div class="mx-auto text-center mb-5" style="max-width: 500px">
          <h6 class="text-primary text-uppercase">#Save Greenery Save Earth</h6>
          <h1 class="display-5" >You Are Just A Click Away To Find Your Plant's Disease!</h1>
        </div>
        <div class="row g-0">
          <div class="col-lg-7">
            <div class="bg-primary h-100 p-5">
                <form id="imageForm">
                    <div class="row g-3">
                        <div class="input-group col-12">
                            <label for="images" class="ms-auto me-auto drop-container" id="dropcontainer">
                                <span class="drop-title">Drop files here</span>
                                or
                                <input
                                    type="file"
                                    class="form-control"
                                    id="imageInput"
                                    accept="image/*"
                                    onchange="previewImage()"
                                />
                            </label>
                        </div>
                        <div class="col-12">
                            <!-- Display uploaded photo here -->
                            <img
                                id="preview"
                                src="#"
                                alt="Preview"
                                style="max-width: 100%; height: 300px; display: none"
                                class="ms-auto me-auto"
                            />
                        </div>
                        <div class="col-12">
                            <button class="btn btn-secondary w-100 py-3" type="submit">
                                Find Disease!
                            </button>
                        </div>
                    </div>
                </form>
            </div>
          </div>
          <div class="col-lg-5">
            <div class="bg-secondary h-100 p-5">
              <h2 class="text-success mb-4">Disease and Precautions Will be Shown Below: </h2>
              <div class="d-flex mb-4">
                <div class="ps-3">
                  <h5 class="text-black" id="result">Waiting For Your Input :)</h5>
                  <span class="text-white d-block"></span>
                </div>
              </div>
              
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Contact End -->

    <!-- Footer Start -->
    <div class="container-fluid bg-footer bg-primary text-white mt-5">
      <div class="container">
        <div class="row gx-5">
          <div class="col-lg-8 col-md-6">
            <div class="row gx-5">
              <div class="col-lg-4 col-md-12 pt-5 mb-5">
                <h4 class="text-white mb-4">Get In Touch</h4>
                <div class="d-flex mb-2">
                  <i class="bi bi-geo-alt text-white me-2"></i>
                  <p class="text-white mb-0">R-xyx Block 19 FB Area Karachi</p>
                </div>
                <div class="d-flex mb-2">
                  <i class="bi bi-envelope-open text-white me-2"></i>
                  <p class="text-white mb-0">abbasghori0229@gmail.com</p>
                </div>
                <div class="d-flex mb-2">
                  <i class="bi bi-telephone text-white me-2"></i>
                  <p class="text-white mb-0">+92 30302008961</p>
                </div>
                <div class="d-flex mt-4">
                  <a
                    class="btn btn-secondary btn-square rounded-circle me-2"
                    href="#"
                    ><i class="fab fa-twitter"></i
                  ></a>
                  <a
                    class="btn btn-secondary btn-square rounded-circle me-2"
                    href="#"
                    ><i class="fab fa-facebook-f"></i
                  ></a>
                  <a
                    class="btn btn-secondary btn-square rounded-circle me-2"
                    href="#"
                    ><i class="fab fa-linkedin-in"></i
                  ></a>
                  <a
                    class="btn btn-secondary btn-square rounded-circle"
                    href="#"
                    ><i class="fab fa-instagram"></i
                  ></a>
                </div>
              </div>
              <div class="col-lg-4 col-md-12 pt-0 pt-lg-5 mb-5">
                <h4 class="text-white mb-4">Quick Links</h4>
                <div class="d-flex flex-column justify-content-start">
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Home</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>About
                    Us</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Our
                    Services</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Meet The
                    Team</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Latest
                    Blog</a
                  >
                  <a class="text-white" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Contact
                    Us</a
                  >
                </div>
              </div>
              <div class="col-lg-4 col-md-12 pt-0 pt-lg-5 mb-5">
                <h4 class="text-white mb-4">Popular Links</h4>
                <div class="d-flex flex-column justify-content-start">
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Home</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>About
                    Us</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Our
                    Services</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Meet The
                    Team</a
                  >
                  <a class="text-white mb-2" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Latest
                    Blog</a
                  >
                  <a class="text-white" href="#"
                    ><i class="bi bi-arrow-right text-white me-2"></i>Contact
                    Us</a
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 mt-lg-n5">
            <div
              class="d-flex flex-column align-items-center justify-content-center text-center h-100 bg-secondary p-5"
            >
              <h4 class="text-white">Newsletter</h4>
              <h6 class="text-white">Subscribe Our Newsletter</h6>
              <p>Amet justo diam dolor rebum lorem sit stet sea justo kasd</p>
              <form action="">
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control border-white p-3"
                    placeholder="Your Email"
                  />
                  <button class="btn btn-primary">Sign Up</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid bg-dark text-white py-4">
      <div class="container text-center">
        <p class="mb-0">
          &copy; <a class="text-secondary fw-bold" href="#">Leaf Check</a>. All
          Rights Reserved. Designed by
          <a class="text-secondary fw-bold" href="https://htmlcodex.com"
            >Abbas Ghori</a
          >
        </p>
      </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-secondary py-3 fs-4 back-to-top">
      <i class="bi bi-arrow-up"></i>
    </a>

    {% comment %} function to send image to model API {% endcomment %}
    <script>
      document.getElementById("imageForm").addEventListener("submit", function(event) {
          event.preventDefault(); // Prevent form submission
          const formData = new FormData();
          const fileInput = document.getElementById("imageInput");
          const file = fileInput.files[0];
          formData.append("image", file);
  
          fetch("/predict/", {
              method: "POST",
              body: formData
          })
          .then(response => response.json())
          .then(data => {
              const resultElement = document.getElementById("result");
              resultElement.innerHTML = `Predicted class: ${data.result}<br><br><br>Treatment: ${data.treatment}<br><br><br>Some Purchasing Links:<br><br>`;
              for (let i = 0; i < data.fungicides.length; i++) {
                  resultElement.innerHTML += `${data.fungicides[i]}: `;
                  const links = data.links[data.fungicides[i]];
                  if (links && links.length > 0) {
                      for (let j = 0; j < links.length; j++) {
                          resultElement.innerHTML += `<a href="${links[j]}" target="_blank">Link ${j + 1}</a>`;
                          if (j < links.length - 1) {
                              resultElement.innerHTML += ", ";
                          }
                      }
                  } else {
                      resultElement.innerHTML += "";
                  }
                  resultElement.innerHTML += "<br>";
              }
              resultElement.style.display = "block";
          })
          .catch(error => {
              console.error("Error:", error);
          });
      });
  
      function previewImage() {
          const preview = document.getElementById("preview");
          const fileInput = document.getElementById("imageInput");
          const file = fileInput.files[0];
          const reader = new FileReader();
  
          reader.onload = function(e) {
              preview.src = e.target.result;
              preview.style.display = "block";
          };
  
          reader.readAsDataURL(file);
      }
  </script>
  
  
<script>
    const dropContainer = document.getElementById("dropcontainer")
    const fileInput = document.getElementById("images")
  
    dropContainer.addEventListener("dragover", (e) => {
      // prevent default to allow drop
      e.preventDefault()
    }, false)
  
    dropContainer.addEventListener("dragenter", () => {
      dropContainer.classList.add("drag-active")
    })
  
    dropContainer.addEventListener("dragleave", () => {
      dropContainer.classList.remove("drag-active")
    })
  
    dropContainer.addEventListener("drop", (e) => {
      e.preventDefault()
      dropContainer.classList.remove("drag-active")
      fileInput.files = e.dataTransfer.files
    })
</script>
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/counterup/counterup.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>

    <!-- Template Javascript -->
    <script src="{% static 'js/main.js' %}"></script>
  </body>
</html>
